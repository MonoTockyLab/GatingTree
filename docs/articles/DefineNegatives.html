<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>GatingTree: Using DefineNegatives for Determining Positive/Negative Thresholds • GatingTree</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="GatingTree: Using DefineNegatives for Determining Positive/Negative Thresholds">
<meta name="google-site-verification" content="Pj4WWF5m9cqCcPqkGG75BI1_593zXImuFRpI8TnAous">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">GatingTree</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/DefineNegatives.html">GatingTree: Using DefineNegatives for Determining Positive/Negative Thresholds</a></li>
    <li><a class="dropdown-item" href="../articles/GatingTree_Workflow.html">GatingTree: Analyzing Cytometry Data with GatingTree</a></li>
    <li><a class="dropdown-item" href="../articles/NavigatingMultidimensionalCytometryData.html">GatingTree: Navigating Multidimensional CytometryData</a></li>
    <li><a class="dropdown-item" href="../articles/UsingCSVfileInputs.html">GatingTree: Initialization Using CSV File Inputs</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MonoTockyLab/GatingTree/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>GatingTree: Using DefineNegatives for Determining Positive/Negative Thresholds</h1>
                        <h4 data-toc-skip class="author">Dr Masahiro
Ono</h4>
            
            <h4 data-toc-skip class="date">2025-03-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/MonoTockyLab/GatingTree/blob/HEAD/vignettes/DefineNegatives.Rmd" class="external-link"><code>vignettes/DefineNegatives.Rmd</code></a></small>
      <div class="d-none name"><code>DefineNegatives.Rmd</code></div>
    </div>

    
    
<p><img src="assets%2FGatingTree_logo.jpg" width="40%"></p>
<div class="section level2">
<h2 id="defining-thresholds-for-marker-positivity-using-interactive-sessions">Defining Thresholds for Marker Positivity Using Interactive
Sessions<a class="anchor" aria-label="anchor" href="#defining-thresholds-for-marker-positivity-using-interactive-sessions"></a>
</h2>
<p>This vignette demonstrates how to use the
<code>DefineNegatives</code> function, which enables interactive
definition of thresholds for marker positivity/negativity (or
autofluorescence).</p>
<p>To interactively define autofluorescence without negative controls,
run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Interactively define marker positivity/ autofluorescence</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/DefineNegatives.html">DefineNegatives</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<p>Running <code>DefineNegatives</code> initiates an interactive
session, prompting you to set thresholds for marker positivity.</p>
<div class="section level3">
<h3 id="step-1-selecting-markers">Step 1: Selecting Markers<a class="anchor" aria-label="anchor" href="#step-1-selecting-markers"></a>
</h3>
<p>First, select the markers for which you want to set thresholds. A
prompt will appear allowing you to choose the markers from your
dataset.</p>
<p><img src="assets%2Fprompt1.jpg" width="30%"></p>
</div>
<div class="section level3">
<h3 id="step-2-choosing-the-y-axis-variable">Step 2: Choosing the Y-axis Variable<a class="anchor" aria-label="anchor" href="#step-2-choosing-the-y-axis-variable"></a>
</h3>
<p>Next, choose a variable for the y-axis to generate a 2D plot for
setting a threshold along the x-axis (i.e., for the chosen marker).
Alternatively, you can select “Density” to generate a density plot.</p>
<p><img src="assets%2Fprompt2.jpg" width="40%"></p>
<p>Thank you for clarifying that distinction. It’s essential to apply
the correct terminology for different markers based on their staining
characteristics and data distribution. Here’s a revised version of the R
Markdown content that accounts for the variability in how markers should
be interpreted, using both “high vs low” and “positive vs negative”
designations where appropriate:</p>
</div>
</div>
<div class="section level2">
<h2 id="using-a-density-plot-histogram">Using a Density Plot (Histogram)<a class="anchor" aria-label="anchor" href="#using-a-density-plot-histogram"></a>
</h2>
<p>If you select “Density,” a density plot (smoothed histogram) of the
marker’s expression levels is displayed:</p>
<p><img src="assets%2FpromptCD3_1.jpg" width="40%"></p>
<ul>
<li>
<strong>Defining the Threshold</strong>: Click on the plot at the
point where you want to set the threshold along the x-axis. Depending on
the marker characteristics:
<ul>
<li>For markers like CD45 and CD44, where staining is observed in most
cells, set the threshold between ‘high’ and ‘low’.</li>
<li>For other markers, determine the threshold to differentiate
‘positive’ from ‘negative’ populations, particularly when a clear
autofluorescence background separation is visible. The y-axis values are
not considered in this selection.</li>
</ul>
</li>
<li>
<strong>Confirming Your Selection</strong>: After clicking, press
the Escape (ESC) key to confirm your choice.</li>
</ul>
<p><img src="assets%2FpromptCD3_2.jpg" width="40%"></p>
<p>You will then see a prompt in the terminal:</p>
<pre><code>Happy with your gating? (Yes/no/cancel)</code></pre>
<ul>
<li>
<strong>Yes</strong>: Accepts the threshold and moves to the next
marker.</li>
<li>
<strong>No</strong>: Allows you to redo the threshold selection for
the current marker.</li>
<li>
<strong>Cancel</strong>: Exits the interactive session.</li>
</ul>
</div>
<div class="section level2">
<h2 id="using-a-2d-plot">Using a 2D Plot<a class="anchor" aria-label="anchor" href="#using-a-2d-plot"></a>
</h2>
<p>Alternatively, you can select a different marker for the y-axis to
create a 2D scatter plot. This method can be useful depending on the
data structure and characteristics of your antibodies.</p>
<p><img src="assets%2Fprompt_CD19_2.jpg" width="40%"></p>
<ul>
<li>
<strong>Defining the Threshold</strong>: Click on the plot at the
desired threshold point along the x-axis. Again, the y-axis values are
ignored for threshold setting.</li>
<li>
<strong>Confirming Your Selection</strong>: Press the Escape (ESC)
key to confirm your choice.</li>
</ul>
<p>After confirming, you’ll receive the same terminal prompt to confirm
or redo your selection.</p>
</div>
<div class="section level2">
<h2 id="completing-the-interactive-session">Completing the Interactive Session<a class="anchor" aria-label="anchor" href="#completing-the-interactive-session"></a>
</h2>
<p>Once thresholds are set for all selected markers, the interactive
session will complete automatically. Your <code>FlowObject</code>
(<code>x</code>) now contains the defined thresholds, which can be used
in subsequent analyses with the <strong>GatingTree</strong> package.</p>
</div>
<div class="section level2">
<h2 id="considerations-and-best-practice">Considerations and Best Practice:<a class="anchor" aria-label="anchor" href="#considerations-and-best-practice"></a>
</h2>
<p>An automated approach using staining controls was tested but found
impractical due to challenges with autofluorescence and variability in
negative populations. Manual interactive thresholding remains the
recommended method, and future development aims to improve automation in
threshold determination. Thus, currently, the recommended approach is as
follows:</p>
<ul>
<li>
<strong>Visual Inspection:</strong>
<ul>
<li>Initially use the density plot option to examine the plots for
distinct peaks or inflection points.</li>
<li>Place thresholds appropriately based on marker characteristics: at
the boundary between high and low expression levels for broadly stained
markers, or between positive and negative populations for others.</li>
<li>If the density plot is not conclusive, use a 2D plot with a
biologically meaningful marker for the y-axis.</li>
</ul>
</li>
<li>
<strong>Adjustments:</strong>
<ul>
<li>If the initial thresholds are not satisfactory, rerun
<code>DefineNegatives</code> for the specific markers and adjust
accordingly.</li>
</ul>
</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://monotockylab.github.io/" class="external-link">Masahiro Ono</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
